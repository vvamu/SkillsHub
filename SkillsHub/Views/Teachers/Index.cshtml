@using SkillsHub.Application.Helpers;
@using SkillsHub.Application.DTO;


@model PagedList<TeacherDTO>?
    <!-- Custom Stylesheet -->

    <div >
        <div >

            <div class="row page-titles mx-0">
                <div class="col p-md-0">
                    <ol class="breadcrumb" style="display:flex;align-items:center">
                        <li class="breadcrumb-item"><a href="javascript:void(0)">Dashboard</a></li>
                        <li class="breadcrumb-item active"><a href="javascript:void(0)">Home</a></li>
                    <li>
                        <div>
                            <a style="margin-left:20px" class="btn btn-secondary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Action
                                </a>
                            
                            <ul class="dropdown-menu">
                                <form>
                                <li><a class="dropdown-item" href="#">Invite via email</a></li>
                                <li>

                                    <a class="dropdown-item" asp-action="Create" asp-controller="Account">Create new</a>
                                    
                                </li>
                                </form>
                                </ul>
                            
                        </div>
                    </li>
                    
                    </ol>
                </div>
            </div>

        @{
            if (Model == null || Model.Count == 0)
        {

                <div style=" display:flex;flex;grid-gap:20px;justify-content:center ">
                    <h3>Teacher list is empty</h3>
                </div>

        }

        else {
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Teachers</h4>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered zero-configuration">
                                    <thead>
                                        <tr>
                                            <th>Login</th>
                                            <th>Full Name</th>
                                            <th>Sex</th>
                                            <th>Phone</th>
                                            <th>Email</th>
                                            <th>BirthDate</th>
                                            <th>Age</th>
                                            <th>Groups</th>
                                            <th>Total Lessons</th>
                                            <th>Month Lessons</th>
                                            <th>Calculated salary</th>
                                            <th>IsAdmin</th>
                                            <th>SourceFindCompany</th>
                                            <th>IsDeleted</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{

                                            foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td><form><a asp-action="Item" asp-controller="Account" asp-route-id="@item.ApplicationUser.Id" style="font-weight:900;color:#7571f9">  @item.Login </a></form></td>
                                                    <td>@item.FirstName @item.LastName @item.Surname</td>
                                                    <td>@item.Sex</td>
                                                    <td>@item.Phone</td>
                                                    <td>@item.Email</td>
                                                    <td>@item.BirthDate</td>
                                                    <td>(@DateTime.Now.AddYears(-item.BirthDate.Year)).Year</td>
                                                    <form><td>@if(item.UserTeacher == null || item.UserTeacher.Groups == null) {<h2>-</h2>} else { foreach(var gr in item.UserTeacher.Groups){ <a asp-action="Item" asp-controller="Group" asp-route-id="@gr.Id" style="font-weight:900;color:#7571f9">  @gr.Name </a>} }</td></form> 
                                                    <td>@{if (item.TotalLessons == null) { <div>0</div> } else { @item.TotalLessons.Count }}</td>
                                                    <td>@{if (item.TotalLessons == null) { <div>0</div> } else { @item.TotalLessons.Where(x=>x.StartTime.Month == DateTime.Now.AddMonths(-1).Month)}}</td>
                                                    <td>@item.CalculatedSalary</td>
                                                    <td>@item.IsAdmin</td>
                                                    <td>@item.SourceFindCompany</td>
                                                    <td>@item.IsDeleted</td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                                    <th>Login</th>
                                                    <th>Full Name</th>
                                                    <th>Sex</th>
                                                    <th>Phone</th>
                                                    <th>Email</th>
                                                    <th>BirthDate</th>
                                                    <th>Age</th>
                                                    <th>Groups</th>
                                                    <th>Total Lessons</th>
                                                    <th>Month Lessons</th>
                                                    <th>Calculated salary</th>
                                                    <th>IsAdmin</th>
                                                    <th>SourceFindCompany</th>
                                                    <th>IsDeleted</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        }
        }

         <!-- #/ container -->
        </div>

    </div>

    <script src="/plugins/common/common.min.js"></script>
    <script src="/js/custom.min.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/gleek.js"></script>
    <script src="/js/styleSwitcher.js"></script>

    <script src="/plugins/tables/js/jquery.dataTables.min.js"></script>
    <script src="/plugins/tables/js/datatable/dataTables.bootstrap4.min.js"></script>
    <script src="/plugins/tables/js/datatable-init/datatable-basic.min.js"></script>

